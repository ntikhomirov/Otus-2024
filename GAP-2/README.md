# Otus-2024 HW2
## Отказоустойчивость Prometheus, хранилища метрик для Prometheus (Thanos, VictoriaMetrics, Mimir)

### Подготовка окружения к ДЗ
Переиспользовал виртуальную машину из прошлого занятия.

## Установка Mimir
* Скачиваем необходимые пакеты с [GitHub Releases](https://github.com/grafana/mimir/releases/).
* Устанавливаем их через dpkg.
* Создаем два файла конфигурации: один для тестирования файловой системы (filesystem), другой для проверки S3.

### Результат экспериментов
![img](img/2.png)
![img](img/3.png)

## Конфигурация Prometheus
* Добавляем в файл `prometheus.yml` секцию `remote_write` (Для записи в mimir).
* Добавляем в файл `prometheus.yml` секцию `relabel_configs` (Для добавление доп. метки).
![img](img/5.png)

## Grafana
* Переключаем источник данных на использование Mimir.
![img](img/6.png)

## Эксперимент
* Время хранения в Mimir составляет 30 минут.

![img](img/4.png)

На графиках в Grafana видно четкую границу в 30 минут.
![img](img/1.png)
![img](img/7.png)

## Все файлы конфигурации присутствуют в ДЗ
